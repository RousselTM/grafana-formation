apiVersion: 1

policies:
- orgId: 1
  receiver: External Alerts
  routes:
  - receiver: "Critical"
    group_by: ["grafana_folder", "alertname"]
    matchers:
      -  alert_level =~ "critical_production|security"
    object_matchers:
      - ["alert_level", "=", "critical_production|security"]
    mute_time_intervals:
      - WorkingHours
  - receiver: "Non-Critical - MS Teams"
    group_by: ["grafana_folder", "alertname"]
    matchers:
      -  alert_level =~ "non-critical_production|non-critical_non_production|critical_non-production"
    object_matchers:
      - ["alert_level", "=~", "non-critical_production|non-critical_non_production|critical_non-production"]
    mute_time_intervals:
      - WorkingHours
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 4h